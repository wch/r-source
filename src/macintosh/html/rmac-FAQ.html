<html lang="en"><head>
<title>R for Macintosh DOC/FAQ</title>
</head><body>



<h1 align="center">R for Macintosh FAQ/DOC</h1>
<h2>Version for <tt>R 1.5.0</tt></h2>
<address>S. M. Iacus</address>
<p>
Changes and bug fixing specific to this version:
<ul>
<li>  using dev.off() when a user close a windows instead
  of killing directly the device</li>
<li>  changed MPWBuild to take care of changes in the src/include   
  directory</li>
<li>  fixed a bug with path length (Thanks to T.Lumley)    </li>
<li> fixed a problem with building help files. In particular,
  html help files now have correct links</li>
<li> added system() functionality under MacOS X. When R is
  running under MacOS X, it is now possibile to run BSD
  shell commands via the system() R command. Very limited
  at the moment but working.</li>
<li> Fixed the problem with the error message: "negative length vectors 
    are not allowed". Now you should not experiment this anymore.  </li>
<li> MacZip is not needed anymore</li>    
  </ul>




<p><p><hr><p>
<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <title>rmac-FAQ.html</title>
</head>
<body>

<center>This is the ReadMe file of R for Macintosh Application.
<p>We discuss here the following topics:</center>

<p>* <a href="#NEWS">NEWS</a>
<br>* <a href="#GUI">THE GUI</a>
<br>* <a href="#SCRIPTS">APPLE SCRIPT SUPPORT</a>
<br>* <a href="#EDITOR">EXTERNAL EDITOR INTERACTION</a>
<br>* <a href="#MEMORY">MEMORY</a>
<br>* <a href="#PREFERENCES">SPECIFYING OPTIONS: the Preferences pane</a>
<br>* <a href="#OPTIONS">SPECIFYING ENVIRONMENT VARIABLES: the .Renviron file</a>
<br>* <a href="#USERMENU">THE USER MENU</a>
<br>* <a href="#HELPERS">R HELPERS</a>
<br>* <a href="#REQUIREMENTS">SYSTEM REQUIREMENTS</a>
<br>* <a href="#KBUGS">KNOWN BUGS</a>
<br>* <a href="#FAQ">SHORT FAQ  (in the MAC-FAQ)</a>
<br>* <a href="#REMERC">REMERCIEMENTES</a>
<p>
<hr WIDTH="100%">
<p><a NAME="NEWS"></a><b>NEWS</b>
<br>There are several enanchements in this release. Most of them concern
the user interface of R application but one of the most important novelty
is that now
<br>R runs both on MacOS and MacOS X using Carbon technology. This means
that when you run R from MacOS X it run natively under the new System without
calling the Classic Compatibility Module. The use of R under MacOS X takes
lots of advantages starting from the new Aqua look.
<p>As this version is based on the new Carbon technology some new bugs
can appear that we were'nt able to found before releasing R officially.
<p>Any feedback is then welcome at stefano.iacus@unimi.it
<br> 
<br> 
<p><a NAME="GUI"></a><b>THE NEW GUI</b>
<br>Several menus are now present from this release. The structure of the
menus is as follows with a brief description.
<table BORDER=1 CELLSPACING=3 CELLPADDING=3>
<tr>
<td>Menu </td>

<td>Item</td>

<td>Shortcut</td>

<td>Brief description</td>
</tr>

<tr>
<td>Apple (or Application Menu under MacOS X)</td>

<td></td>

<td></td>

<td></td>
</tr>

<tr>
<td></td>

<td>About R </td>

<td> </td>

<td>Opens the R information dialog. Reports release informations.</td>
</tr>
<tr>
<td></td>

<td>Preferences </td>

<td>(under OS X only, see the Config menu for pre X Systems)</td>

<td>Opens the R Preferences pane</td>
</tr>

<tr>
<td></td>

<td></td>

<td></td>

<td></td>
</tr>

<tr>
<td>File</td>

<td></td>

<td></td>

<td></td>
</tr>

<tr>
<td></td>

<td>New Edit Window </td>

<td>N </td>

<td>Opens an empty editable window. You can usethis as an internal editor 
for R. If the current active window isa graphic device window than a new
macintosh() device will be opened.</td>
</tr>

<tr>
<td> </td>

<td>Edit Object</td>

<td>  E </td>

<td>Is the equivalent of "edit(object)"</td>
</tr>

<tr>
<td></td>

<td>Source File</td>

<td>  O</td>

<td>Opens a file and sources it. This is equivalent to "source(file)"</td>
</tr>

<tr>
<td></td>

<td>Open File For Editing</td>

<td> </td>

<td>Opens a file in an editable window.Useful when you want to modify an 
existing script and test it.</td>
</tr>

<tr>
<td></td>

<td>File Show </td>

<td>F</td>

<td>Open a file in a non editable window.  This isthe equivalent of
R command  "show.file(file)"</td>
</tr>

<tr>
<td></td>

<td>Load Workspace File</td>

<td>L </td>

<td>If you want to load a wspace image  otherthan ".RData"</td>
</tr>

<tr>
<td> </td>

<td>Save Workspace As</td>

<td></td>

<td>If you want to save an image file  other the ".RData"</td>
</tr>

<tr>
<td></td>

<td>Page Setup</td>

<td></td>

<td> Calls the printer driver page setup</td>
</tr>

<tr>
<td></td>

<td>Print </td>

<td>  P</td>

<td>Print the text window (R Console etc) or the imagein the graphic device
window. The image is rescaled to the   page dimension of your
printer.</td>
</tr>

<tr>
<td></td>

<td>Save</td>

<td>   S</td>

<td>Save the window. This could be the content ofthe R Console i.e. your
current R session any text window or the graphic device window. </td>
</tr>
<tr>
<td></td>

<td>Save As...</td>

<td>   </td>

<td>Save the window. This could be the content ofthe R Console i.e. your
current R session any text window or the graphicdevice window. This menu
acts as a standard "Save As" menu so you   have to specify each time the
filename.</td>
</tr>

<tr>
<td></td>

<td>Close </td>

<td>  W </td>

<td>Closes the current window. If it is the    R Console
window than it is interpreted    as quitting R.</td>
</tr>

<tr>
<td></td>

<td>Quit</td>

<td>   Q</td>

<td>This menu item is on the Application Menu under MacOS X</td>
</tr>

<tr>
<td></td>

<td></td>

<td></td>

<td></td>
</tr>

<tr>
<td>Edit</td>

<td></td>

<td></td>

<td></td>
</tr>

<tr>
<td></td>

<td>Undo</td>

<td>   Z</td>

<td></td>
</tr>

<tr>
<td></td>

<td>Cut</td>

<td>   X</td>

<td></td>
</tr>

<tr>
<td></td>

<td>Copy</td>

<td>   C </td>

<td>If you use it on a graphic device window theimage is copied to the    
clipboard (see also knownbugs)</td>
</tr>

<tr>
<td></td>

<td>Paste </td>

<td>V</td>

<td></td>
</tr>

<tr>
<td></td>

<td>Copy &amp; Paste</td>

<td> </td>

<td>You copy some text and the resultis  pasted into the R Console
window.    You use thiswhen you select a piece of    
R code of text windowand then you want  to R to execute it. This is
quite useful    when you want to test part of your script
of the examples of an help window</td>
</tr>

<tr>
<td> </td>

<td>Clear</td>

<td></td>

<td></td>
</tr>

<tr>
<td></td>

<td>Select All</td>

<td>  A</td>

<td></td>
</tr>

<tr>
<td></td>

<td>Goto line</td>

<td></td>

<td>  Active only for editable windows. It moves thecursor  to
a certain line</td>
</tr>

<tr>
<td></td>

<td></td>

<td></td>

<td></td>
</tr>

<tr>
<td>Tools</td>

<td></td>

<td></td>

<td></td>
</tr>

<tr>
<td></td>

<td>Show Workspace</td>

<td></td>

<td>   It is equivalent to  "ls()"</td>
</tr>

<tr>
<td> </td>

<td>Clear Workspace</td>

<td></td>

<td>   It is equivalent to "rm(list=ls())"</td>
</tr>

<tr>
<td></td>

<td>Load Workspace</td>

<td></td>

<td>   Loads the ".RData" file; equivalent to    
load(".RData")</td>
</tr>

<tr>
<td></td>

<td>Save Workspace</td>

<td></td>

<td>   Save the workspace to ".RData"; equivalent to "save.image()"</td>
</tr>

<tr>
<td></td>

<td>Load History</td>

<td></td>

<td>   It is equivalent to "loadhistory()"</td>
</tr>

<tr>
<td></td>

<td>Save History </td>

<td></td>

<td>It is equivalent to "savehistory()"</td>
</tr>

<tr>
<td></td>

<td>Show History </td>

<td></td>

<td>It is equivalent to "history()"</td>
</tr>

<tr>
<td></td>

<td>Change Working Directory</td>

<td>D </td>

<td>Allows the user to change the workingdirectory by using a standard
dialog</td>
</tr>

<tr>
<td></td>

<td>Show Working Directory</td>

<td></td>

<td>  It is equivalent to "getwd()"</td>
</tr>

<tr>
<td></td>

<td>Reset Working Directory </td>

<td></td>

<td>It is equivalent to "setwd(R.home())"</td>
</tr>

<tr>
<td></td>

<td>Show Libraries </td>

<td></td>

<td>It is equivalent to "library()"</td>
</tr>

<tr>
<td> </td>

<td>Show DataSets </td>

<td></td>

<td>  It is equivalent to "data()"</td>
</tr>

<tr>
<td></td>

<td></td>

<td></td>

<td></td>
</tr>

<tr>
<td>Windows</td>

<td></td>

<td></td>

<td></td>
</tr>

<tr>
<td></td>

<td>R Console</td>

<td></td>

<td> This menu contains by default only the "R Console" item
and it is dynamically  changed by appending/removing the
names  of any new/closed window</td>
</tr>

<tr>
<td></td>

<td></td>

<td></td>

<td></td>
</tr>


<tr>
<td>Config</td>

<td></td>

<td></td>

<td></td>
</tr>

<tr>
<td></td>

<td>Allow Interrupt</td>

<td> </td>

<td>It is equivalent to set the option "Interrupt=TRUE" in the 
.Renvironment config file but this can be changed at runtime.
This menu is syncronized
with the option you select in the Preference pane.
</td></td>
</tr>

<tr>
<td> </td>

<td>On Open Source</td>

<td></td>

<td>It is equivalent to set the option "OnOpenSource=TRUE" in the 
.Renvironment config file but this can be changed at runtime. Useful to 
work with external editor such as Alpha. This menu is syncronized
with the option you select in the Preference pane.
</td>
</tr>

<tr>
<td></td>

<td>Preferences </td>

<td>(under Mac OS only)</td>

<td>Opens the R Preferences pane</td>
</tr>

<tr>
<td>Help</td>

<td></td>

<td></td>

<td></td>
</tr>

<tr>
<td></td>

<td>R Help</td>

<td>? </td>

<td>    It is equivalent to "help.start()"</td>
</tr>

<tr>
<td> </td>

<td>Help On Topic</td>

<td></td>

<td>   Opens a dialog where the user can specify an item he or
she wants to see.     equivalent to "help(topic)" or
"?topic"</td>
</tr>

<tr>
<td></td>

<td>Search Help On </td>

<td></td>

<td>  Opens a dialog where the user can  specify an argument to
have help on. It     is equivalent to"help.search("topic")"</td>
</tr>

<tr>
<td> </td>

<td>Run An Example </td>

<td></td>

<td>Opens a dialog where the user can specify an item of which he or she
wants to run      anexample of. It is equivalent
to "example(topic)".</td>
</tr>

<tr>
<td> </td>
<td>Link Packages Help</td>

<td></td>

<td>After installing a new package you need to link help files database.</td>
</tr>
</table>
<i><u></u></i>
<p><i><u>About R windows.</u></i>
<br>Normally R opens windows to let 80 character/columns to be displayed.
The size of the windows is calculated on the basis of the size of the font
used.
<br>For non fixed fonts the algorithm can fail so the window can result
a bit larger or smaller then needed.
<br>R windows are opened in cascade for each class (edit windows, file
show windows and graphic windows). This functionality does not work on
MacOS X yet.
<br> 
<p><a NAME="SCRIPTS"></a><b>APPLE SCRIPT SUPPORT</b><br>
From release 1.3.1 R has partial support for AppleScripts.
This means two things: you can run applescripts from inside R using the 
command applescript() (see the corresponing help) or you can ask R to run 
commands <b>from</b> and applescript. The directory "scripts" in the main 
R folder contains two examples of applescripts. What follows is an example of
applescript that interacts with R.
<p>


<BLOCKQUOTE>
<b>set</b> CommandLine to "R.Version()"<br>
<b>try</b><br>
<b>tell</b> application "R"<br>
&nbsp; <b>activate</b></b><br>
 &nbsp;&nbsp; with <b>timeout</b> of 90000 seconds<br>
&nbsp;&nbsp;&nbsp;   <b>cmd</b> CommandLine<br>
&nbsp;&nbsp;&nbsp;   <b>cmd</b> "Sys.getenv()"<br>
&nbsp;&nbsp; <b>end</b> timeout<br>
&nbsp; <b>end</b> tell<br>
<b>end</b> try<br>
</BLOCKQUOTE>


<p>
Where <b>cmd</b> is the applescript command in the R dictionary  that is 
used to tell R to execute an R 
command in the R Console. The syntax is <b>cmd</b> <<i>command 
string</i>>, where <i>command string</i> have to be in quotes.
Actually, the output of the command is not sent back to the 
application that is calling R but to the R 
Console. 


<p><a NAME="EDITOR"></a><b>EXTERNAL EDITOR INTERACTION</b>
<br>From release 7.4.1 of the famous Alpha editor, there is a (tcl) mode
called S+/R.
<br>When you open a file in Alpha with the extension ".s"  or 
".r"  this new mode will be installed and you will in the Alpha menu
bar the "S+/R" menu. Of this menu you can use "Process File" or "Process
Selection" to interact with R. By default Alpha sends an “open” command
to R and by default R opens a file in a non editable window (equivalent
to the “File Show” menu). If you want R to source a file you should modify
activate the option "OnOpenSource" that
is set by default to "FALSE".  You can change
this at runtime running via the Config/OnOpenSource menu or accessing 
the Preferences pane.
The latest version of Alpha can be found at 
<a href="http://alpha.olm.net/">http://alpha.olm.net</a><a href="http://www.alpha.olm.net"></a>


<p><a NAME="MEMORY"></a><b>MEMORY</b>
<br>Under MacOS you should reserve a fixed amount of memory to each application.
As R is just an application, you need to set this to a bigger amount of
memory if for some reason R went out of memory. To do this, go to the Finder
and select the R aplication icon. Then with CMD+I key obtain the Information
for R. Select "Memory" and the fix the amount of memory you need. Under
MacOS X, there is no need to reserve memory to R. R will use as much
memory as it needs.


<p><a NAME="PREFERENCES"></a>
<br><b>SPECIFYING OPTIONS:</b> the Preferences pane<br>
The Preferences pane allow you to configure a bit R GUI and behaviour.
You can set the tab size in your edit windows, the font type and size of 
text windows and R Console as well as the colors of the text in R Console.
You can also specify a particular font for the graphic device and the 
resolution of the graphic device. Finally you can specify if R should 
accept User breaks (CMD+. or Esc). If this option is enabled R is a bit 
slower. You can instruct R on what to do when a file is opened: source it 
or simply show in the internal viewer.
<p>
Take care that under MacOS R creates a file in the Preferences folder of 
you System Folder. If you switch to MacOS X than, this folder is no longer 
the default Preferences folder so you have either to move th "R 
preferences" file to "~user/Library/Preferences/" directory or reset the
preferences.
If you have different logins under OS X, remember that each user should set its own 
preferences.

<br> 


<p><a NAME="OPTIONS"></a>
<br><b>SPECIFYING ENVIRONMENT VARIABLES: </b>the .Renviron file
<br>In this file you can specify some of options or environment variables. This is not standard
for general MacOS/X applications but has been implemented for 
compatibility reasons. If you don't need to set environment variables you 
can ignore what is in this file.
<br>The environment file is used by R application both to simulate the
enviroment on a standard Unix or Windows system.
<br>You can always use "Sys.getenv()" to see which variables are set to 
some values.
<br> The .Renviron file looks like this:
an option is a "Rkey" with its "keyvalue" that you can specify in new separate
line as follows  RKey=keyvalue. Consider that RKey=keyvalue and RKey
= keyvalue are different, that means that blanks/spaces are significant.
"RKey" and "keyvalue" are case sensitive.  A symbol "#" at the beginning
of a line means that this is a commented out line.
<br>You can find more details on that in the .Renviron file itself.

<p><a NAME="USERMENU"></a>
<br><b>THE NEW USER MENU</b>
<br>The user has now the ability to create a menu with several menuitems,
up to 99, where to keep preferred R commands. <br>
With the commands add.menu.cmd("label","R_command") the user adds a menuitem named "label" to the 
User menu. When the command is selected from the menu, R executes the command "Rcommand"
associated to it.
The User menu is created dynamically, so that user will never see it if he does not add any
item to it.<br>
Several functions to manipulate the user menu are previewed: <p>
<table border = 2>
<tr>
<td>get.menu.cmd("label")</td><td>returns the R Command associated to menu item "label" and the corresponding menu number
</td></tr>
<tr><td>get.num.cmd(menunum)</td><td>returns the R Command associated to menu item number "menunum" and the corresponding menu label
</td></tr>
<tr><td>del.menu.cmd("label")</td><td>removes the menu item "label" from the User menu
</td></tr>
<tr><td>del.num.cmd(menunum)</td><td>removes the menu item numbered "menunum" from the User menu
</td></tr>
<tr><td>del.usr.cmd("label")</td><td>removes the whole User's menu 
</td></tr>
<tr><td>add.menu.cmd("label","RCommand")</td><td>adds a menu item to the User's menu, if any, with associated the R command "RCommand"
</td></tr>
</table>




<p><a NAME="HELPERS"></a><b>R HELPERS</b>
<br>* If you want to use an external editor we suggest you to use Alpha
version  7.4.1 or newer that contains a S+/R mode. Alpha home page
is
<br><a href=" http://alpha.olm.net/"> http://alpha.olm.net</a>
<br>

<br> 
<br> 
<p><a NAME="REQUIREMENTS"></a><b>SYSTEM REQUIREMENTS</b>
<p>To run the R application you need at least 42MB of free memory for the
application itself you work under MacOS but there is no limitations under
MacOS X as virtual memory is always on.
<br>You need the latest version of the 
<a href="http://asu.info.apple.com/swupdates.nsf/artnum/n11916">CarbonLib 
library</a> from Apple. At the time of this release, version 1.4  is the current non developer release.
Normally it is included in System 9.2 and X.
<br><a NAME="f2cLib">Now R needs the f2cLib shared library to run. This 
library is distributed with R but in case you miss it you can found it <a 
href="http://www.ci.tuwien.ac.at/~iacus/R">here</a>.
<br>The minimum System version release is 8.6 (+ CarbonLib library).
<br>You need the WasteLib library. This library is distributed with R 
binaries.
<br>You need the zlibLib library. This library is distributed with R 
binaries. 

<p><br><a NAME="KBUGS"></a><b>KNOWN BUGS</b>
<br> 
<ul>

<ul>

<li> This version of R and Adobe ATM are incompatible. We are looking at 
the problem. The solution is that you should switch ATM off before running 
R. (Thanks to R. Gill for feedback on this bug)</li>

<li>Internet functionality is not available yet. We are working on this.</li>

<li>Mathematical expressions are not yet well spaced moreover, 
mathemathic symbols are not rotated.</li>
</ul>
<a NAME="FAQ"></a><b>SHORT FAQ (in the MAC-FAQ)</b>
<br> 
<br> 
<table BORDER COLS=2 WIDTH="100%" >

<tr>
<td>Q</td>

<td>How can I manage invisible files under MacOS X ?</td>
</tr>

<tr>
<td>A</td>

<td>Under Unix it is typical that invisible files are files starting with 
a "." (dot) in the filename. MacOS X conforms to this convention. So it 
could happen that your preferred editor doesn't allow you to open and or 
write files like .Rprofile or .Renviron under MacOS X (this is the case of 
BBedit as reported by one user). You have several options: one of this is to
a file like "some_file" with your editor or R, and then use the system() command
to change its name as follows system("mv some_file .some_file"). Then use
system("ls -al") to see if all went right. 
</td>
</tr>

<tr>
<td>Q</td>

<td>On exit: Why I can't save the workspace image via file dialog under MacOS X ?</td>
</tr>

<tr>
<td>A</td>

<td>As before, files starting with a dot, such as ".RData" cannot be managed
directly via standard dialogs (you can see invisible files but 
you can't specify them as filenames !)<br>
To save the workspace image, you
can either save it with a different name (e.g. "RData", but in this
the workspace image will not be reloaded the next you start R), or you
save it beofre quitting R: 
type "save.image()"  from the R Console  and then "q()" replying "n" 
when R asks for "Save workspace image? [y/n/c]:".
</td>
</tr>



<tr>
<td>Q</td>

<td>How can I work on a separate directory for each of my projects?</td>
</tr>

<tr>
<td>A</td>

<td>Under Unix you usually create a directory, go into it and launch R. 
Under MacOS you can create a directory and put all the files that you need
there. You then (or before) run R in its own directory and  use the
menu item "Tools->Change Working Directory" to change the  current
working directory to directory you have created. You can  then work
as you do in Unix. You can save/load workspace image to  this directory,
as well as the command history files. You can then  reload these next
time you work.</td>
</tr>

<tr>
<td>Q</td>

<td> How can I interrupt lengthy operations or output ?</td>
</tr>

<tr>
<td>A</td>

<td> You can now use the standard Macintosh control break sequence, 
that is you should press "Cmd option" and "." (dot). This will interrupt 
any R loops. The "Esc" key gives you the same result.
</td>
</tr>
<tr>
<td>Q</td>

<td> How can I change memory settings for R ? (MacOS pre X only)</td>
</tr>

<tr>
<td>A</td>

<td> You cannot use the standard settings as on other platforms. You 
should assign memory to R from the Finder/Information dialog for 
R application. See Section "Memory" above.</td>
</tr>
<tr>
<td>Q</td>

<td> When I use to send R output to a file like "my_file", R seems to work on this file but
I cannot find it. What happened ? (MacOS X only)</td>
</tr>

<tr>
<td>A</td>

<td> On MacOS X it is important to specify correctly the file names. If you 
want the file to be created in your current working directory you have to
put a ":" before file name, such as ":myfile" otherwise the file will be created
as "/my_file", i.e. in the root "/" directory. This is in particular 
important when you specify directories relative to your current working
directory.
</td>
</tr>
</table>
<p>
<a NAME="REMERC"></a><b>REMERCIEMENTS</b><br>
I would like to thank among the others (only few I can remember due to my brain volatility...) some of the people
 who have contantly sent me 
feedback on this Macintosh port of R or simply suggetested me some possibile
directions. So, <i>merci</i>, in random order, to  P. Macdonald, P. Flint, R. Gill, K. Pflugshaupt, 
J. DeLeeuw, G. Sawitzki and half of the R-Core.
<p><hr WIDTH="100%">
<address>
Last edited 2002 March 24th, Stefano M. Iacus
<code><a
href="mailto:stefano.iacus@unimi.it">stefano.iacus@unimi.it</a></code>
</address>

</body></html>
