#
# ${RHOME}/src/appl/Makefile

VPATH = @srcdir@
srcdir = @srcdir@
top_srcdir = @top_srcdir@

top_builddir = ../..
subdir = src/appl

include $(top_builddir)/Makeconf

distdir = $(top_builddir)/$(PACKAGE)-$(VERSION)/$(subdir)
DISTFILES = $(shell cd $(srcdir); \
	       ls COPYRIGHT COPYRIGHT.ftn Makefile.in ROUTINES *.[cfh])

## All functions/subroutines to be called via .C() or .Fortran() must
## also have an entry in `./ROUTINES' in order to be ``pre-dyn.loaded'';
## see `../unix/dynload.c'.

OBJS = \
	S_compat.o \
	approx.o \
	bakslv.o \
	binning.o \
	$(BLAS) \
	ch2inv.o \
	chol.o \
	chull.o \
	cpoly.o \
	cumsum.o \
	distance.o \
	dpbfa.o \
	dpbsl.o \
	dpoco.o \
	dpodi.o \
	dpofa.o \
	dposl.o \
	dqrdc.o \
	dqrdc2.o \
        dqrls.o \
	dqrsl.o \
	dqrutl.o \
	dsvdc.o \
	dtrco.o \
	dtrsl.o \
	eigen.o \
	fortran.o \
	fft.o \
	fmin.o \
	lminfl.o \
	loglin.o \
	lowess.o \
	machar.o \
	massdist.o \
	pretty.o \
	pythag.o \
	rowsum.o \
	splines.o \
	stem.o \
	strsignif.o \
	tabulate.o \
	uncmin.o \
	zeroin.o

LIB = libappl.a

all: R

R: $(LIB)

$(LIB):	$(OBJS)
	$(AR) cr $(LIB) $(OBJS)
	$(RANLIB) $(LIB)

$(OBJS): $(top_srcdir)/src/include/Applic.h
approx.o binning.o cpoly.o distance.o splines.o tabulate.o: $(top_srcdir)/src/include/Arith.h

mostlyclean: clean
clean:
	@-rm -f *.o *.a
distclean: clean
	@-rm -f Makefile
maintainer-clean: distclean

distdir: $(DISTFILES)
	@for f in $(DISTFILES); do \
	  test -f $(distdir)/$${f} \
	    || ln $(srcdir)/$${f} $(distdir)/$${f} 2>/dev/null \
	    || cp -p $(srcdir)/$${f} $(distdir)/$${f}; \
	done
