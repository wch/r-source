
R Under development (unstable) (2023-12-22 r85720) -- "Unsuffered Consequences"
Copyright (C) 2023 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> ### Tests of transliteration in PDF
> 
> ## macOS >= 14 transliterates many chars, ans R 4.4.0 some many of
> ## these for other platforms.  Some were tested in encodings.R, the
> ## rest here.
> 
> options(warn = 1L)
> 
> ### only do this in a UTF-8 locale
> if (!l10n_info()[["UTF-8"]]) {
+     warning("encodings3.R requires a UTF-8 locale")
+     q("no")
+ }
> ## musl will substitute * for all of these.
> musl <- grepl("musl", R.version$os)
> if(musl) q("no")
> 
> 
> ## Two-ckar fixups
> two <- c(0x2260, 0x226A, 0x226B, 0x2025, 0x203C, 0x2122)
> two <- intToUtf8(two, TRUE)
> cat(two, sep ="  "); cat("\n")
â‰   â‰ª  â‰«  â€¥  â€¼  â„¢
> 
> ## Three-char fixups
> three <- c(0x2194, 0x21D4, 0x22D8, 0x22D9, 0x2026, 0x22EF)
> three <- intToUtf8(three, TRUE)
> cat(three, sep ="  "); cat("\n")
â†”  â‡”  â‹˜  â‹™  â€¦  â‹¯
> ## 0x22EF is transliterated to 3x 'middle dot' in a suitable encoding
> 
> ## Four-char fixups
> four <- c(0x33C2, 0x33D8)
> four <- intToUtf8(four, TRUE)
> cat(four, sep ="  "); cat("\n")
ã‚  ã˜
> 
> pdf("Encoding3.pdf", width = 7, height = 7, compress = FALSE)
> plot(1:10, 1:10, type = "n")
> text(0.5+seq_along(two), 2, two, adj = c(0,0))
Warning in text.default(0.5 + seq_along(two), 2, two, adj = c(0, 0)) :
  for 'â‰ ' in 'mbcsToSbcs': /= substituted for â‰  (U+2260)
Warning in text.default(0.5 + seq_along(two), 2, two, adj = c(0, 0)) :
  for 'â‰ª' in 'mbcsToSbcs': << substituted for â‰ª (U+226A)
Warning in text.default(0.5 + seq_along(two), 2, two, adj = c(0, 0)) :
  for 'â‰«' in 'mbcsToSbcs': >> substituted for â‰« (U+226B)
Warning in text.default(0.5 + seq_along(two), 2, two, adj = c(0, 0)) :
  for 'â€¥' in 'mbcsToSbcs': .. substituted for â€¥ (U+2025)
Warning in text.default(0.5 + seq_along(two), 2, two, adj = c(0, 0)) :
  for 'â€¼' in 'mbcsToSbcs': !! substituted for â€¼ (U+203C)
Warning in text.default(0.5 + seq_along(two), 2, two, adj = c(0, 0)) :
  for 'â„¢' in 'mbcsToSbcs': TM substituted for â„¢ (U+2122)
> text(0.5+seq_along(three), 3, three, adj = c(0,0))
Warning in text.default(0.5 + seq_along(three), 3, three, adj = c(0, 0)) :
  for 'â†”' in 'mbcsToSbcs': <-> substituted for â†” (U+2194)
Warning in text.default(0.5 + seq_along(three), 3, three, adj = c(0, 0)) :
  for 'â‡”' in 'mbcsToSbcs': <=> substituted for â‡” (U+21D4)
Warning in text.default(0.5 + seq_along(three), 3, three, adj = c(0, 0)) :
  for 'â‹˜' in 'mbcsToSbcs': <<< substituted for â‹˜ (U+22D8)
Warning in text.default(0.5 + seq_along(three), 3, three, adj = c(0, 0)) :
  for 'â‹™' in 'mbcsToSbcs': >>> substituted for â‹™ (U+22D9)
Warning in text.default(0.5 + seq_along(three), 3, three, adj = c(0, 0)) :
  for 'â€¦' in 'mbcsToSbcs': ... substituted for â€¦ (U+2026)
Warning in text.default(0.5 + seq_along(three), 3, three, adj = c(0, 0)) :
  for 'â‹¯' in 'mbcsToSbcs': ··· substituted for â‹¯ (U+22EF)
> text(0.5+seq_along(four), 4, four, adj = c(0,0))
Warning in text.default(0.5 + seq_along(four), 4, four, adj = c(0, 0)) :
  for 'ã‚' in 'mbcsToSbcs': a.m. substituted for ã‚ (U+33C2)
Warning in text.default(0.5 + seq_along(four), 4, four, adj = c(0, 0)) :
  for 'ã˜' in 'mbcsToSbcs': p.m. substituted for ã˜ (U+33D8)
> 
> ## Now try centring
> plot(1:10, 1:10, type = "n")
> text(0.5+seq_along(two), 2, two)
Warning in text.default(0.5 + seq_along(two), 2, two) :
  for 'â‰ ' in 'mbcsToSbcs': /= substituted for â‰  (U+2260)
Warning in text.default(0.5 + seq_along(two), 2, two) :
  for 'â‰ª' in 'mbcsToSbcs': << substituted for â‰ª (U+226A)
Warning in text.default(0.5 + seq_along(two), 2, two) :
  for 'â‰«' in 'mbcsToSbcs': >> substituted for â‰« (U+226B)
Warning in text.default(0.5 + seq_along(two), 2, two) :
  for 'â€¥' in 'mbcsToSbcs': .. substituted for â€¥ (U+2025)
Warning in text.default(0.5 + seq_along(two), 2, two) :
  for 'â€¼' in 'mbcsToSbcs': !! substituted for â€¼ (U+203C)
Warning in text.default(0.5 + seq_along(two), 2, two) :
  for 'â„¢' in 'mbcsToSbcs': TM substituted for â„¢ (U+2122)
> text(0.5+seq_along(three), 3, three)
Warning in text.default(0.5 + seq_along(three), 3, three) :
  for 'â†”' in 'mbcsToSbcs': <-> substituted for â†” (U+2194)
Warning in text.default(0.5 + seq_along(three), 3, three) :
  for 'â‡”' in 'mbcsToSbcs': <=> substituted for â‡” (U+21D4)
Warning in text.default(0.5 + seq_along(three), 3, three) :
  for 'â‹˜' in 'mbcsToSbcs': <<< substituted for â‹˜ (U+22D8)
Warning in text.default(0.5 + seq_along(three), 3, three) :
  for 'â‹™' in 'mbcsToSbcs': >>> substituted for â‹™ (U+22D9)
Warning in text.default(0.5 + seq_along(three), 3, three) :
  for 'â€¦' in 'mbcsToSbcs': ... substituted for â€¦ (U+2026)
Warning in text.default(0.5 + seq_along(three), 3, three) : for 'â‹¯' in 'mbcsToSbcs': ··· substituted for â‹¯ (U+22EF)
> text(0.5+seq_along(four), 4, four)
Warning in text.default(0.5 + seq_along(four), 4, four) :
  for 'ã‚' in 'mbcsToSbcs': a.m. substituted for ã‚ (U+33C2)
Warning in text.default(0.5 + seq_along(four), 4, four) :
  for 'ã˜' in 'mbcsToSbcs': p.m. substituted for ã˜ (U+33D8)
> dev.off()
null device 
          1 
> 
> if(!capabilities("cairo")) q("no")
> cairo_pdf("cairo_pdf-encodings3.pdf", width = 7, height = 7, onefile = TRUE)
> plot(1:10, 1:10, type = "n")
> text(0.5+seq_along(two), 2, two, adj = c(0,0))
> text(0.5+seq_along(three), 3, three, adj = c(0,0))
> text(0.5+seq_along(four), 4, four, adj = c(0,0))
> plot(1:10, 1:10, type = "n")
> text(0.5+seq_along(two), 2, two)
> text(0.5+seq_along(three), 3, three)
> text(0.5+seq_along(four), 4, four)
> dev.off()
null device 
          1 
> 
> 
> proc.time()
   user  system elapsed 
  0.480   0.120   0.572 
